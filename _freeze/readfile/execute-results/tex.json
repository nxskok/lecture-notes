{
  "hash": "8ca12e10081daf7b72ec5603b8d764d8",
  "result": {
    "markdown": "---\ntitle: \"Reading data files\"\n---\n\n\n\n\n## Introduction\n\n- First thing we need to do is to read in data, so that we can use our\nsoftware to analyze.\n- Consider these:\n  - Spreadsheet data saved as `.csv` file.\n  - “Delimited” data such as values separated by spaces.\n  - Actual Excel spreadsheets.\n  \n## Packages for this section\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n## A spreadsheet\n\n![](spreadsheet.png)\n\n## Save as `.csv`\n\n- `.csv` or “comma-separated values” is a way of turning spreadsheet\nvalues into plain text.\n- Easy to read into R\n- but does not preserve formulas. (This is a reason for doing all your\ncalculations in your statistical software, and only having data in your\nspreadsheet.)\n- File, Save As Text CSV (or similar). \n- used name `test1.csv`.\n\n\n## The `.csv` file\n\n```\nid,x,y,group\np1,10,21,upper\np2,11,20,lower\np3,13,25,upper\np4,15,27,lower\np5,16,30,upper\np6,17,31,lower\n```\n\n\nTo read this in:\n\n- Fire up  R Studio at `r.datatools.utoronto.ca` \n- Upload this .csv file. (Bottom right, next to New Folder, Upload.)\nClick Choose File, find the file, click Open. Click OK. See the file\nappear bottom right.\n\n## Make a new Quarto document\n\n- File, New File, Quarto Document\n- ...and get rid of the template document (leaving the first four lines).\n- Make a code chunk and in it put this. Run it.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n## Reading in the file\n\n- Use `read_csv` with the name of the file, in quotes. Save the read-in\nfile in something, here called `mydata`. Make a new code chunk for\nthis:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmydata <- read_csv(\"test1.csv\")\nmydata\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 4\n  id        x     y group\n  <chr> <dbl> <dbl> <chr>\n1 p1       10    21 upper\n2 p2       11    20 lower\n3 p3       13    25 upper\n4 p4       15    27 lower\n5 p5       16    30 upper\n6 p6       17    31 lower\n```\n:::\n:::\n\n\n\n## More on the above\n\n- read_csv guesses what kind of thing is in each column. Here it\ncorrectly guesses that:\n  - id and group are text (categorical variables). id is actually “identifier\nvariable”: identifies individuals.\n  - x and y are \"double\": numbers that might have a decimal point in them.\n\n## R Studio on your own computer\n\n- Put the .csv file in the same folder as your project. Then read it in\nas above like `read_csv(\"test1.csv\")`.\n- Or, use\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nf <- file.choose()\nf\n```\n:::\n\n\n\nwhich brings up a file selector (as if you were going to find a file to\nload or save it). Find your `.csv` file, the address of which will be\nsaved in `f`, and then:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmydata <- read_csv(f)\n```\n:::\n\n\n\n- When you have selected the file, comment out the `file.choose` line\nby putting a # on the front of it. That will save you having to find\nthe file again by mistake. (Keyboard shortcut: go to the line, type\ncontrol-shift-C or Mac equivalent with Cmd.)\n\n## Looking at what we read in\n- Again, type the name of the thing to display it:\n\n\\scriptsize\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmydata\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 4\n  id        x     y group\n  <chr> <dbl> <dbl> <chr>\n1 p1       10    21 upper\n2 p2       11    20 lower\n3 p3       13    25 upper\n4 p4       15    27 lower\n5 p5       16    30 upper\n6 p6       17    31 lower\n```\n:::\n:::\n\n\n\\normalsize\n\n- This is a “tibble” or data frame, the standard way of storing a data\nset in R.\n- Tibbles print as much as will display on the screen. If there are more\nrows or columns, it will say so.\n- You will see navigation keys to display more rows or columns (if there are more).\n\n## `View`-ing your data frame\n\n- Another way to examine your data frame is to View it, like this:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nView(mydata)\n```\n:::\n\n\n\n...or find your data frame in the Global Environment top right and\nclick it.\n- This pops up a “data frame viewer” top left:\n\n![](viewview.png){height=500px}\n\n## This View\n\n- Read-only: cannot edit data\n- Can display data satisfying conditions: click on Filter, then:\n  - for a categorical variable, type name of category you want\n  - for a quantitative variable, use slider to describe values you want.\n- Can sort a column into ascending or descending order (click little\narrows next to column name).\n- Clicking the symbol with arrow on it left of Filter “pops out” View\ninto separate (bigger) window.\n\n## Summarizing what we read in\n\n- It is always a good idea to look at your data after you have read it in,\nto make sure you have believable numbers (and the right number of\nindividuals and variables).\n- Quick check for errors: these often show up as values too high or too\nlow, so the min and/or max will be unreasonable.\n- Five-number summary:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(mydata)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      id                  x               y            group          \n Length:6           Min.   :10.00   Min.   :20.00   Length:6          \n Class :character   1st Qu.:11.50   1st Qu.:22.00   Class :character  \n Mode  :character   Median :14.00   Median :26.00   Mode  :character  \n                    Mean   :13.67   Mean   :25.67                     \n                    3rd Qu.:15.75   3rd Qu.:29.25                     \n                    Max.   :17.00   Max.   :31.00                     \n```\n:::\n:::\n\n\n\n- Quantitative, five-number summary plus mean.\n- Categorical, how many rows.\n\n## Reading from a URL\n- Any data file on the Web can be read directly.\n- [Example data link:](http://ritsokiguess.site/datafiles/global.csv)\n- Use URL instead of filename.\n- I like to save the URL in a variable first (because URLs tend to be\nlong), and then put that variable in the `read_` function:\n\n\\small\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_url <- url(\"http://ritsokiguess.site/datafiles/global.csv\")\nglobal <- read_csv(my_url)\n```\n:::\n\n\n\\normalsize\n\n## The data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglobal\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 x 3\n   warehouse  size  cost\n   <chr>     <dbl> <dbl>\n 1 A           225 12.0 \n 2 B           350 14.1 \n 3 A           150  8.93\n 4 A           200 11.0 \n 5 A           175 10.0 \n 6 A           180 10.1 \n 7 B           325 13.8 \n 8 B           290 13.3 \n 9 B           400 15   \n10 A           125  7.97\n```\n:::\n:::\n\n\n\n## Space-delimited files\n\n- Another common format for data is a text file with the values\nseparated by spaces. Top of some other data:\n\n```\ncup tempdiff      \t    \nStarbucks 13   \t  \t    \nStarbucks 7    \t   \nStarbucks 7    \t   \nStarbucks 17.5 \t   \nStarbucks 10   \t   \nStarbucks 15.5 \t   \nStarbucks 6    \t   \nStarbucks 6    \t   \nSIGG 12\t       \t   \nSIGG 16\t       \t   \nSIGG 9\t       \t   \nSIGG 23\t       \t   \nSIGG 11\t       \t   \nSIGG 20.5      \t   \nSIGG 12.5      \nSIGG 20.5      \nSIGG 24.5      \nCUPPS 6    \nCUPPS 6    \nCUPPS 18.5 \nCUPPS 10   \n```\n\n\n## Reading the coffee data\n\n- This file was on my computer so I uploaded it to `r.datatools.utoronto.ca`\nfirst.\n- This time, `read_delim`, and we also have to say what the thing is\nseparating the values:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoffee <- read_delim(\"coffee.txt\", \" \")\ncoffee\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 32 x 2\n   cup       tempdiff\n   <chr>        <dbl>\n 1 Starbucks     13  \n 2 Starbucks      7  \n 3 Starbucks      7  \n 4 Starbucks     17.5\n 5 Starbucks     10  \n 6 Starbucks     15.5\n 7 Starbucks      6  \n 8 Starbucks      6  \n 9 SIGG          12  \n10 SIGG          16  \n# i 22 more rows\n```\n:::\n:::\n\n\n\n- Name of the cup, text, and tempdiff, a decimal number.\n\n## Looking at the values (some)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoffee\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 32 x 2\n   cup       tempdiff\n   <chr>        <dbl>\n 1 Starbucks     13  \n 2 Starbucks      7  \n 3 Starbucks      7  \n 4 Starbucks     17.5\n 5 Starbucks     10  \n 6 Starbucks     15.5\n 7 Starbucks      6  \n 8 Starbucks      6  \n 9 SIGG          12  \n10 SIGG          16  \n# i 22 more rows\n```\n:::\n:::\n\n\n\nThese were four brands of travel mug (in cup), and for each, how much\nthe temperature of the coffee in the mug decreased over 30 minutes.\n\n## Reading from the Web; the soap data\n- Use the URL in place of the filename.\n- Save the URL in a variable first:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- url(\"http://ritsokiguess.site/datafiles/soap.txt\")\nsoap <- read_delim(url, \" \")\n```\n:::\n\n\n\n## The soap data (some)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsoap\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 27 x 4\n    case scrap speed line \n   <dbl> <dbl> <dbl> <chr>\n 1     1   218   100 a    \n 2     2   248   125 a    \n 3     3   360   220 a    \n 4     4   351   205 a    \n 5     5   470   300 a    \n 6     6   394   255 a    \n 7     7   332   225 a    \n 8     8   321   175 a    \n 9     9   410   270 a    \n10    10   260   170 a    \n# i 17 more rows\n```\n:::\n:::\n\n\n\n## Data aligned in columns\n- Sometimes you see data aligned in columns, thus:\n\n![](Screenshot_2019-04-24_20-16-24.png){height=400px}\n\n- `read_delim` will not work: values separated by more than one space.\n- The number of spaces between values is not constant, because there\nis one fewer space before the 10.\n- `read_table` works for this.\n\n## Reading in column-aligned data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndrugs <- read_table(\"migraine.txt\")\ndrugs\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 9 x 3\n  DrugA DrugB DrugC\n  <dbl> <dbl> <dbl>\n1     4     6     6\n2     5     8     7\n3     4     4     6\n4     3     5     6\n5     2     4     7\n6     4     6     5\n7     3     5     6\n8     4    10     5\n9     4     6     5\n```\n:::\n:::\n\n\n\n\n## Reading an Excel sheet directly\n\n- Here is [my spreadsheet](test2.xlsx) from before, but tarted up a bit:\n\n![](excel.png){height=450px}\n\n- It is now a workbook with a second sheet called “notes” (that we\ndon’t want).\n- Install package `readxl` first.\n\n## Reading it in\n\n- Read into R, saying that we only want the sheet “data”. Upload\nspreadsheet first.\n- Excel spreadsheets must be “local”:\ncannot read one in from a URL.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\nmydata2 <- read_excel(\"test2.xlsx\", sheet = \"data\")\nmydata2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 4\n  id        x     y group\n  <chr> <dbl> <dbl> <chr>\n1 p1       10    21 upper\n2 p2       11    20 lower\n3 p3       13    25 upper\n4 p4       15    27 lower\n5 p5       16    30 upper\n6 p6       17    31 lower\n```\n:::\n:::\n",
    "supporting": [
      "readfile_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}