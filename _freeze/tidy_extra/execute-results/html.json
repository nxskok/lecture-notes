{
  "hash": "97c9378c9cfec7e33920ad51ea5efce4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Tidying data: extras\"\n---\n\n\n\n\n## Packages\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n## The pig feed data again\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_url <- \"http://ritsokiguess.site/datafiles/pigs1.txt\"\npigs <- read_table(my_url)\npigs\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"pig\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"feed1\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"feed2\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"feed3\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"feed4\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"60.8\",\"3\":\"68.7\",\"4\":\"92.6\",\"5\":\"87.9\"},{\"1\":\"2\",\"2\":\"57.0\",\"3\":\"67.7\",\"4\":\"92.1\",\"5\":\"84.2\"},{\"1\":\"3\",\"2\":\"65.0\",\"3\":\"74.0\",\"4\":\"90.2\",\"5\":\"83.1\"},{\"1\":\"4\",\"2\":\"58.6\",\"3\":\"66.3\",\"4\":\"96.5\",\"5\":\"85.7\"},{\"1\":\"5\",\"2\":\"61.7\",\"3\":\"69.8\",\"4\":\"99.1\",\"5\":\"90.3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Make longer (as before)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npigs %>% pivot_longer(-pig, names_to=\"feed\", \n                      values_to=\"weight\") -> pigs_longer\npigs_longer\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"pig\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"feed\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"weight\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"feed1\",\"3\":\"60.8\"},{\"1\":\"1\",\"2\":\"feed2\",\"3\":\"68.7\"},{\"1\":\"1\",\"2\":\"feed3\",\"3\":\"92.6\"},{\"1\":\"1\",\"2\":\"feed4\",\"3\":\"87.9\"},{\"1\":\"2\",\"2\":\"feed1\",\"3\":\"57.0\"},{\"1\":\"2\",\"2\":\"feed2\",\"3\":\"67.7\"},{\"1\":\"2\",\"2\":\"feed3\",\"3\":\"92.1\"},{\"1\":\"2\",\"2\":\"feed4\",\"3\":\"84.2\"},{\"1\":\"3\",\"2\":\"feed1\",\"3\":\"65.0\"},{\"1\":\"3\",\"2\":\"feed2\",\"3\":\"74.0\"},{\"1\":\"3\",\"2\":\"feed3\",\"3\":\"90.2\"},{\"1\":\"3\",\"2\":\"feed4\",\"3\":\"83.1\"},{\"1\":\"4\",\"2\":\"feed1\",\"3\":\"58.6\"},{\"1\":\"4\",\"2\":\"feed2\",\"3\":\"66.3\"},{\"1\":\"4\",\"2\":\"feed3\",\"3\":\"96.5\"},{\"1\":\"4\",\"2\":\"feed4\",\"3\":\"85.7\"},{\"1\":\"5\",\"2\":\"feed1\",\"3\":\"61.7\"},{\"1\":\"5\",\"2\":\"feed2\",\"3\":\"69.8\"},{\"1\":\"5\",\"2\":\"feed3\",\"3\":\"99.1\"},{\"1\":\"5\",\"2\":\"feed4\",\"3\":\"90.3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Make wider two ways 1/2\n\n`pivot_wider` is inverse of `pivot_longer`:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npigs_longer %>% \n  pivot_wider(names_from=feed, values_from=weight)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"pig\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"feed1\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"feed2\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"feed3\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"feed4\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"60.8\",\"3\":\"68.7\",\"4\":\"92.6\",\"5\":\"87.9\"},{\"1\":\"2\",\"2\":\"57.0\",\"3\":\"67.7\",\"4\":\"92.1\",\"5\":\"84.2\"},{\"1\":\"3\",\"2\":\"65.0\",\"3\":\"74.0\",\"4\":\"90.2\",\"5\":\"83.1\"},{\"1\":\"4\",\"2\":\"58.6\",\"3\":\"66.3\",\"4\":\"96.5\",\"5\":\"85.7\"},{\"1\":\"5\",\"2\":\"61.7\",\"3\":\"69.8\",\"4\":\"99.1\",\"5\":\"90.3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\nwe are back where we started.\n\n## Make wider 2/2\n\nOr\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npigs_longer %>% \n  pivot_wider(names_from=pig, values_from=weight)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"feed\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"1\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"2\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"3\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"4\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"5\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"feed1\",\"2\":\"60.8\",\"3\":\"57.0\",\"4\":\"65.0\",\"5\":\"58.6\",\"6\":\"61.7\"},{\"1\":\"feed2\",\"2\":\"68.7\",\"3\":\"67.7\",\"4\":\"74.0\",\"5\":\"66.3\",\"6\":\"69.8\"},{\"1\":\"feed3\",\"2\":\"92.6\",\"3\":\"92.1\",\"4\":\"90.2\",\"5\":\"96.5\",\"6\":\"99.1\"},{\"1\":\"feed4\",\"2\":\"87.9\",\"3\":\"84.2\",\"4\":\"83.1\",\"5\":\"85.7\",\"6\":\"90.3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Disease presence and absence at two locations\n\nFrequencies of plants observed with and without disease at two\nlocations:\n\n```         \nSpecies     Disease present         Disease absent\n       Location X Location Y  Location X Location Y\nA            44         12          38        10\nB            28         22          20        18\n```\n\nThis has two rows of headers, so I rewrote the data file:\n\n```         \nSpecies  present_x present_y    absent_x  absent_y\nA            44         12          38        10\nB            28         22          20        18\n```\n\n## Read in\n\n... into data frame called `prevalence`:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_url <- \"http://ritsokiguess.site/STAC32/disease.txt\"\nprevalence <- read_table(my_url)\nprevalence\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Species\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"present_x\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"present_y\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"absent_x\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"absent_y\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A\",\"2\":\"44\",\"3\":\"12\",\"4\":\"38\",\"5\":\"10\"},{\"1\":\"B\",\"2\":\"28\",\"3\":\"22\",\"4\":\"20\",\"5\":\"18\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Lengthen and separate\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprevalence %>% \n  pivot_longer(-Species, names_to = \"column\", \n               values_to = \"freq\") %>% \n  separate_wider_delim(column, \"_\", \n                       names = c(\"disease\", \"location\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Species\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"disease\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"location\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"freq\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A\",\"2\":\"present\",\"3\":\"x\",\"4\":\"44\"},{\"1\":\"A\",\"2\":\"present\",\"3\":\"y\",\"4\":\"12\"},{\"1\":\"A\",\"2\":\"absent\",\"3\":\"x\",\"4\":\"38\"},{\"1\":\"A\",\"2\":\"absent\",\"3\":\"y\",\"4\":\"10\"},{\"1\":\"B\",\"2\":\"present\",\"3\":\"x\",\"4\":\"28\"},{\"1\":\"B\",\"2\":\"present\",\"3\":\"y\",\"4\":\"22\"},{\"1\":\"B\",\"2\":\"absent\",\"3\":\"x\",\"4\":\"20\"},{\"1\":\"B\",\"2\":\"absent\",\"3\":\"y\",\"4\":\"18\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Making longer, the better way\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprevalence %>% \n  pivot_longer(-Species, names_to=c(\"disease\", \"location\"),\n               names_sep=\"_\", \n               values_to=\"frequency\") -> prevalence_longer \nprevalence_longer\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Species\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"disease\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"location\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"frequency\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A\",\"2\":\"present\",\"3\":\"x\",\"4\":\"44\"},{\"1\":\"A\",\"2\":\"present\",\"3\":\"y\",\"4\":\"12\"},{\"1\":\"A\",\"2\":\"absent\",\"3\":\"x\",\"4\":\"38\"},{\"1\":\"A\",\"2\":\"absent\",\"3\":\"y\",\"4\":\"10\"},{\"1\":\"B\",\"2\":\"present\",\"3\":\"x\",\"4\":\"28\"},{\"1\":\"B\",\"2\":\"present\",\"3\":\"y\",\"4\":\"22\"},{\"1\":\"B\",\"2\":\"absent\",\"3\":\"x\",\"4\":\"20\"},{\"1\":\"B\",\"2\":\"absent\",\"3\":\"y\",\"4\":\"18\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Making wider, different ways 1/2\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprevalence_longer %>% \n  pivot_wider(names_from=c(Species, location), \n              values_from=frequency)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"disease\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"A_x\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"A_y\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"B_x\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"B_y\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"present\",\"2\":\"44\",\"3\":\"12\",\"4\":\"28\",\"5\":\"22\"},{\"1\":\"absent\",\"2\":\"38\",\"3\":\"10\",\"4\":\"20\",\"5\":\"18\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Making wider, different ways 2/2\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprevalence_longer %>% \n  pivot_wider(names_from=location, values_from=frequency)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Species\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"disease\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"x\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"y\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A\",\"2\":\"present\",\"3\":\"44\",\"4\":\"12\"},{\"1\":\"A\",\"2\":\"absent\",\"3\":\"38\",\"4\":\"10\"},{\"1\":\"B\",\"2\":\"present\",\"3\":\"28\",\"4\":\"22\"},{\"1\":\"B\",\"2\":\"absent\",\"3\":\"20\",\"4\":\"18\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Interlude\n\nPigs data again:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npigs_longer %>% \n  group_by(feed) %>% \n  summarize(weight_mean=mean(weight))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"feed\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"weight_mean\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"feed1\",\"2\":\"60.62\"},{\"1\":\"feed2\",\"2\":\"69.30\"},{\"1\":\"feed3\",\"2\":\"94.10\"},{\"1\":\"feed4\",\"2\":\"86.24\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## What if summary is more than one number?\n\neg. quartiles:\n\n\\scriptsize\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npigs_longer %>% \n  group_by(feed) %>% \n  summarize(r=quantile(weight, c(0.25, 0.75)))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Returning more (or less) than 1 row per `summarise()` group was deprecated in\ndplyr 1.1.0.\nℹ Please use `reframe()` instead.\nℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`\n  always returns an ungrouped data frame and adjust accordingly.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'feed'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"feed\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"r\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"feed1\",\"2\":\"58.6\"},{\"1\":\"feed1\",\"2\":\"61.7\"},{\"1\":\"feed2\",\"2\":\"67.7\"},{\"1\":\"feed2\",\"2\":\"69.8\"},{\"1\":\"feed3\",\"2\":\"92.1\"},{\"1\":\"feed3\",\"2\":\"96.5\"},{\"1\":\"feed4\",\"2\":\"84.2\"},{\"1\":\"feed4\",\"2\":\"87.9\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n\\normalsize\n\n## Following the hint (gives no warning)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npigs_longer %>% \n  group_by(feed) %>% \n  reframe(r=quantile(weight, c(0.25, 0.75)))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"feed\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"r\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"feed1\",\"2\":\"58.6\"},{\"1\":\"feed1\",\"2\":\"61.7\"},{\"1\":\"feed2\",\"2\":\"67.7\"},{\"1\":\"feed2\",\"2\":\"69.8\"},{\"1\":\"feed3\",\"2\":\"92.1\"},{\"1\":\"feed3\",\"2\":\"96.5\"},{\"1\":\"feed4\",\"2\":\"84.2\"},{\"1\":\"feed4\",\"2\":\"87.9\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## this also works\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npigs_longer %>% \n  group_by(feed) %>% \n  summarize(r=list(quantile(weight, c(0.25, 0.75)))) %>% \n  unnest(r)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"feed\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"r\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"feed1\",\"2\":\"58.6\"},{\"1\":\"feed1\",\"2\":\"61.7\"},{\"1\":\"feed2\",\"2\":\"67.7\"},{\"1\":\"feed2\",\"2\":\"69.8\"},{\"1\":\"feed3\",\"2\":\"92.1\"},{\"1\":\"feed3\",\"2\":\"96.5\"},{\"1\":\"feed4\",\"2\":\"84.2\"},{\"1\":\"feed4\",\"2\":\"87.9\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Or, even better, use `enframe`:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nquantile(pigs_longer$weight, c(0.25, 0.75))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   25%    75% \n65.975 90.225 \n```\n\n\n:::\n\n```{.r .cell-code}\nenframe(quantile(pigs_longer$weight, c(0.25, 0.75)))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"name\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"value\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"25%\",\"2\":\"65.975\"},{\"1\":\"75%\",\"2\":\"90.225\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## A nice look\n\nRun this one line at a time to see how it works:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npigs_longer %>% \n  group_by(feed) %>% \n  summarize(r=list(enframe(quantile(weight, c(0.25, 0.75))))) %>% \n  unnest(r) %>% \n  pivot_wider(names_from=name, values_from=value) -> d\nd\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"feed\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"25%\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"75%\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"feed1\",\"2\":\"58.6\",\"3\":\"61.7\"},{\"1\":\"feed2\",\"2\":\"67.7\",\"3\":\"69.8\"},{\"1\":\"feed3\",\"2\":\"92.1\",\"3\":\"96.5\"},{\"1\":\"feed4\",\"2\":\"84.2\",\"3\":\"87.9\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## A hairy one\n\n18 people receive one of three treatments. At 3 different times (pre,\npost, followup) two variables `y` and `z` are measured on each person:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_url <- \"http://ritsokiguess.site/STAC32/repmes.txt\"\nrepmes0 <- read_table(my_url)\nrepmes0\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"treatment\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"rep\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"pre_y\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"post_y\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fu_y\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"pre_z\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"post_z\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fu_z\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A\",\"2\":\"1\",\"3\":\"3\",\"4\":\"13\",\"5\":\"9\",\"6\":\"0\",\"7\":\"0\",\"8\":\"9\"},{\"1\":\"A\",\"2\":\"2\",\"3\":\"0\",\"4\":\"14\",\"5\":\"10\",\"6\":\"6\",\"7\":\"6\",\"8\":\"3\"},{\"1\":\"A\",\"2\":\"3\",\"3\":\"4\",\"4\":\"6\",\"5\":\"17\",\"6\":\"8\",\"7\":\"2\",\"8\":\"6\"},{\"1\":\"A\",\"2\":\"4\",\"3\":\"7\",\"4\":\"7\",\"5\":\"13\",\"6\":\"7\",\"7\":\"6\",\"8\":\"4\"},{\"1\":\"A\",\"2\":\"5\",\"3\":\"3\",\"4\":\"12\",\"5\":\"11\",\"6\":\"6\",\"7\":\"12\",\"8\":\"6\"},{\"1\":\"A\",\"2\":\"6\",\"3\":\"10\",\"4\":\"14\",\"5\":\"8\",\"6\":\"13\",\"7\":\"3\",\"8\":\"8\"},{\"1\":\"B\",\"2\":\"1\",\"3\":\"9\",\"4\":\"11\",\"5\":\"17\",\"6\":\"8\",\"7\":\"11\",\"8\":\"27\"},{\"1\":\"B\",\"2\":\"2\",\"3\":\"4\",\"4\":\"16\",\"5\":\"13\",\"6\":\"9\",\"7\":\"3\",\"8\":\"26\"},{\"1\":\"B\",\"2\":\"3\",\"3\":\"8\",\"4\":\"10\",\"5\":\"9\",\"6\":\"12\",\"7\":\"0\",\"8\":\"18\"},{\"1\":\"B\",\"2\":\"4\",\"3\":\"5\",\"4\":\"9\",\"5\":\"13\",\"6\":\"3\",\"7\":\"0\",\"8\":\"14\"},{\"1\":\"B\",\"2\":\"5\",\"3\":\"0\",\"4\":\"15\",\"5\":\"11\",\"6\":\"3\",\"7\":\"0\",\"8\":\"25\"},{\"1\":\"B\",\"2\":\"6\",\"3\":\"4\",\"4\":\"11\",\"5\":\"14\",\"6\":\"4\",\"7\":\"2\",\"8\":\"9\"},{\"1\":\"Control\",\"2\":\"1\",\"3\":\"10\",\"4\":\"12\",\"5\":\"15\",\"6\":\"4\",\"7\":\"3\",\"8\":\"7\"},{\"1\":\"Control\",\"2\":\"2\",\"3\":\"2\",\"4\":\"8\",\"5\":\"12\",\"6\":\"8\",\"7\":\"7\",\"8\":\"20\"},{\"1\":\"Control\",\"2\":\"3\",\"3\":\"4\",\"4\":\"9\",\"5\":\"10\",\"6\":\"2\",\"7\":\"0\",\"8\":\"10\"},{\"1\":\"Control\",\"2\":\"4\",\"3\":\"10\",\"4\":\"8\",\"5\":\"8\",\"6\":\"5\",\"7\":\"8\",\"8\":\"14\"},{\"1\":\"Control\",\"2\":\"5\",\"3\":\"11\",\"4\":\"11\",\"5\":\"11\",\"6\":\"1\",\"7\":\"0\",\"8\":\"11\"},{\"1\":\"Control\",\"2\":\"6\",\"3\":\"1\",\"4\":\"5\",\"5\":\"15\",\"6\":\"8\",\"7\":\"9\",\"8\":\"10\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Create unique ids\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrepmes0 %>% mutate(id=str_c(treatment, \".\", rep)) %>% \n  select(-rep) %>% \n  select(id, everything()) -> repmes\nrepmes\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"id\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"treatment\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"pre_y\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"post_y\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fu_y\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"pre_z\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"post_z\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fu_z\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"3\",\"4\":\"13\",\"5\":\"9\",\"6\":\"0\",\"7\":\"0\",\"8\":\"9\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"0\",\"4\":\"14\",\"5\":\"10\",\"6\":\"6\",\"7\":\"6\",\"8\":\"3\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"4\",\"4\":\"6\",\"5\":\"17\",\"6\":\"8\",\"7\":\"2\",\"8\":\"6\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"7\",\"4\":\"7\",\"5\":\"13\",\"6\":\"7\",\"7\":\"6\",\"8\":\"4\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"3\",\"4\":\"12\",\"5\":\"11\",\"6\":\"6\",\"7\":\"12\",\"8\":\"6\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"10\",\"4\":\"14\",\"5\":\"8\",\"6\":\"13\",\"7\":\"3\",\"8\":\"8\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"9\",\"4\":\"11\",\"5\":\"17\",\"6\":\"8\",\"7\":\"11\",\"8\":\"27\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"4\",\"4\":\"16\",\"5\":\"13\",\"6\":\"9\",\"7\":\"3\",\"8\":\"26\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"8\",\"4\":\"10\",\"5\":\"9\",\"6\":\"12\",\"7\":\"0\",\"8\":\"18\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"5\",\"4\":\"9\",\"5\":\"13\",\"6\":\"3\",\"7\":\"0\",\"8\":\"14\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"0\",\"4\":\"15\",\"5\":\"11\",\"6\":\"3\",\"7\":\"0\",\"8\":\"25\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"4\",\"4\":\"11\",\"5\":\"14\",\"6\":\"4\",\"7\":\"2\",\"8\":\"9\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"10\",\"4\":\"12\",\"5\":\"15\",\"6\":\"4\",\"7\":\"3\",\"8\":\"7\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"2\",\"4\":\"8\",\"5\":\"12\",\"6\":\"8\",\"7\":\"7\",\"8\":\"20\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"4\",\"4\":\"9\",\"5\":\"10\",\"6\":\"2\",\"7\":\"0\",\"8\":\"10\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"10\",\"4\":\"8\",\"5\":\"8\",\"6\":\"5\",\"7\":\"8\",\"8\":\"14\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"11\",\"4\":\"11\",\"5\":\"11\",\"6\":\"1\",\"7\":\"0\",\"8\":\"11\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"1\",\"4\":\"5\",\"5\":\"15\",\"6\":\"8\",\"7\":\"9\",\"8\":\"10\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Attempt 1\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrepmes %>% pivot_longer(contains(\"_\"),\n                        names_to=c(\"time\", \"var\"),\n                        names_sep=\"_\",\n                        values_to = \"vvv\"\n                         )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"id\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"treatment\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"time\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"var\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"vvv\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"3\"},{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"post\",\"4\":\"y\",\"5\":\"13\"},{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"9\"},{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"0\"},{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"post\",\"4\":\"z\",\"5\":\"0\"},{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"9\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"0\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"post\",\"4\":\"y\",\"5\":\"14\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"10\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"6\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"post\",\"4\":\"z\",\"5\":\"6\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"3\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"4\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"post\",\"4\":\"y\",\"5\":\"6\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"17\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"8\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"post\",\"4\":\"z\",\"5\":\"2\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"6\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"7\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"post\",\"4\":\"y\",\"5\":\"7\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"13\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"7\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"post\",\"4\":\"z\",\"5\":\"6\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"4\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"3\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"post\",\"4\":\"y\",\"5\":\"12\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"11\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"6\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"post\",\"4\":\"z\",\"5\":\"12\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"6\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"10\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"post\",\"4\":\"y\",\"5\":\"14\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"8\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"13\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"post\",\"4\":\"z\",\"5\":\"3\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"8\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"9\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"post\",\"4\":\"y\",\"5\":\"11\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"17\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"8\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"post\",\"4\":\"z\",\"5\":\"11\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"27\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"4\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"post\",\"4\":\"y\",\"5\":\"16\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"13\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"9\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"post\",\"4\":\"z\",\"5\":\"3\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"26\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"8\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"post\",\"4\":\"y\",\"5\":\"10\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"9\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"12\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"post\",\"4\":\"z\",\"5\":\"0\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"18\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"5\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"post\",\"4\":\"y\",\"5\":\"9\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"13\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"3\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"post\",\"4\":\"z\",\"5\":\"0\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"14\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"0\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"post\",\"4\":\"y\",\"5\":\"15\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"11\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"3\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"post\",\"4\":\"z\",\"5\":\"0\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"25\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"4\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"post\",\"4\":\"y\",\"5\":\"11\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"14\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"4\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"post\",\"4\":\"z\",\"5\":\"2\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"9\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"10\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"y\",\"5\":\"12\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"15\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"4\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"z\",\"5\":\"3\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"7\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"2\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"y\",\"5\":\"8\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"12\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"8\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"z\",\"5\":\"7\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"20\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"4\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"y\",\"5\":\"9\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"10\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"2\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"z\",\"5\":\"0\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"10\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"10\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"y\",\"5\":\"8\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"8\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"5\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"z\",\"5\":\"8\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"14\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"11\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"y\",\"5\":\"11\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"11\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"1\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"z\",\"5\":\"0\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"11\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"y\",\"5\":\"1\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"y\",\"5\":\"5\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"y\",\"5\":\"15\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"z\",\"5\":\"8\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"z\",\"5\":\"9\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"z\",\"5\":\"10\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Comment\n\nThis is *too* long! We wanted a column called `y` and a column called\n`z`, but they have been pivoted-longer too.\n\n## Attempt 2\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrepmes %>% pivot_longer(contains(\"_\"),\n                        names_to=c(\"time\", \".value\"),\n                        names_sep=\"_\"\n                        ) -> repmes3\nrepmes3\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"id\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"treatment\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"time\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"y\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"z\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"3\",\"5\":\"0\"},{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"post\",\"4\":\"13\",\"5\":\"0\"},{\"1\":\"A.1\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"9\",\"5\":\"9\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"0\",\"5\":\"6\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"post\",\"4\":\"14\",\"5\":\"6\"},{\"1\":\"A.2\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"10\",\"5\":\"3\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"4\",\"5\":\"8\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"post\",\"4\":\"6\",\"5\":\"2\"},{\"1\":\"A.3\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"17\",\"5\":\"6\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"7\",\"5\":\"7\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"post\",\"4\":\"7\",\"5\":\"6\"},{\"1\":\"A.4\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"13\",\"5\":\"4\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"3\",\"5\":\"6\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"post\",\"4\":\"12\",\"5\":\"12\"},{\"1\":\"A.5\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"11\",\"5\":\"6\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"pre\",\"4\":\"10\",\"5\":\"13\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"post\",\"4\":\"14\",\"5\":\"3\"},{\"1\":\"A.6\",\"2\":\"A\",\"3\":\"fu\",\"4\":\"8\",\"5\":\"8\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"9\",\"5\":\"8\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"post\",\"4\":\"11\",\"5\":\"11\"},{\"1\":\"B.1\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"17\",\"5\":\"27\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"4\",\"5\":\"9\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"post\",\"4\":\"16\",\"5\":\"3\"},{\"1\":\"B.2\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"13\",\"5\":\"26\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"8\",\"5\":\"12\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"post\",\"4\":\"10\",\"5\":\"0\"},{\"1\":\"B.3\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"9\",\"5\":\"18\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"5\",\"5\":\"3\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"post\",\"4\":\"9\",\"5\":\"0\"},{\"1\":\"B.4\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"13\",\"5\":\"14\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"0\",\"5\":\"3\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"post\",\"4\":\"15\",\"5\":\"0\"},{\"1\":\"B.5\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"11\",\"5\":\"25\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"pre\",\"4\":\"4\",\"5\":\"4\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"post\",\"4\":\"11\",\"5\":\"2\"},{\"1\":\"B.6\",\"2\":\"B\",\"3\":\"fu\",\"4\":\"14\",\"5\":\"9\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"10\",\"5\":\"4\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"12\",\"5\":\"3\"},{\"1\":\"Control.1\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"15\",\"5\":\"7\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"2\",\"5\":\"8\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"8\",\"5\":\"7\"},{\"1\":\"Control.2\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"12\",\"5\":\"20\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"4\",\"5\":\"2\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"9\",\"5\":\"0\"},{\"1\":\"Control.3\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"10\",\"5\":\"10\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"10\",\"5\":\"5\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"8\",\"5\":\"8\"},{\"1\":\"Control.4\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"8\",\"5\":\"14\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"11\",\"5\":\"1\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"11\",\"5\":\"0\"},{\"1\":\"Control.5\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"11\",\"5\":\"11\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"pre\",\"4\":\"1\",\"5\":\"8\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"post\",\"4\":\"5\",\"5\":\"9\"},{\"1\":\"Control.6\",\"2\":\"Control\",\"3\":\"fu\",\"4\":\"15\",\"5\":\"10\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Comment\n\nThis has done what we wanted.\n\n## Make a graph\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(repmes3, aes(x=fct_inorder(time), y=y, \n                    colour=treatment, group = id)) +\n  geom_point() + geom_line()\n```\n\n::: {.cell-output-display}\n![](tidy_extra_files/figure-revealjs/tidy-extra-R-19-1.png){width=960}\n:::\n:::\n\n\n\n\n## Comment\n\n- A so-called \"spaghetti plot\": \n  - The three measurements for each person are\njoined by lines\n  - The lines are coloured by treatment.\n\n## Or do the plot with means\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrepmes3 %>% group_by(treatment, ftime=fct_inorder(time)) %>% \n  summarize(mean_y=mean(y)) %>% \n  ggplot(aes(x=ftime, y=mean_y, colour=treatment, \n             group=treatment)) + \n    geom_point() + geom_line()\n```\n\n::: {.cell-output-display}\n![](tidy_extra_files/figure-revealjs/tidy-extra-R-20-1.png){width=960}\n:::\n:::\n\n\n\n\n## Comment\n\n- On average, the two real treatments go up and level off\n- but the control\ngroup is very different.\n",
    "supporting": [
      "tidy_extra_files/figure-revealjs"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"tidy_extra_files/libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"tidy_extra_files/libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}