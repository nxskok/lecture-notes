{
  "hash": "920f03db73ed3f99b1f157d19b85f166",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Numerical Summaries\"\n---\n\n\n\n\n## Summarizing data in R 1/2\n\n-   Have seen `summary` (5-number summary of each column). But what if\n    we want:\n    -   a summary or two of just one column\n    -   a count of observations in each category of a categorical\n        variable\n    -   summaries by group\n    -   a different summary of all columns (eg. SD)\n-   To do this, meet pipe operator `%>%`. This takes input data frame,\n    does something to it, and outputs result. (Learn: `Ctrl-Shift-M`.)\n\n## Summarizing data in R 2/2\n\n-   Output from a pipe can be used as input to something else, so can\n    have a sequence of pipes.\n-   Summaries include: `mean`, `median`, `min`, `max`, `sd`, `IQR`,\n    `quantile` (for obtaining quartiles or any percentile), `n` (for\n    counting observations).\n-   Use our Australian athletes data again.\n\n## Packages for this section\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(athletes)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Sex               Sport                RCC             WCC        \n Length:202         Length:202         Min.   :3.800   Min.   : 3.300  \n Class :character   Class :character   1st Qu.:4.372   1st Qu.: 5.900  \n Mode  :character   Mode  :character   Median :4.755   Median : 6.850  \n                                       Mean   :4.719   Mean   : 7.109  \n                                       3rd Qu.:5.030   3rd Qu.: 8.275  \n                                       Max.   :6.720   Max.   :14.300  \n       Hc              Hg             Ferr             BMI       \n Min.   :35.90   Min.   :11.60   Min.   :  8.00   Min.   :16.75  \n 1st Qu.:40.60   1st Qu.:13.50   1st Qu.: 41.25   1st Qu.:21.08  \n Median :43.50   Median :14.70   Median : 65.50   Median :22.72  \n Mean   :43.09   Mean   :14.57   Mean   : 76.88   Mean   :22.96  \n 3rd Qu.:45.58   3rd Qu.:15.57   3rd Qu.: 97.00   3rd Qu.:24.46  \n Max.   :59.70   Max.   :19.20   Max.   :234.00   Max.   :34.42  \n      SSF             %Bfat             LBM               Ht       \n Min.   : 28.00   Min.   : 5.630   Min.   : 34.36   Min.   :148.9  \n 1st Qu.: 43.85   1st Qu.: 8.545   1st Qu.: 54.67   1st Qu.:174.0  \n Median : 58.60   Median :11.650   Median : 63.03   Median :179.7  \n Mean   : 69.02   Mean   :13.507   Mean   : 64.87   Mean   :180.1  \n 3rd Qu.: 90.35   3rd Qu.:18.080   3rd Qu.: 74.75   3rd Qu.:186.2  \n Max.   :200.80   Max.   :35.520   Max.   :106.00   Max.   :209.4  \n       Wt        \n Min.   : 37.80  \n 1st Qu.: 66.53  \n Median : 74.40  \n Mean   : 75.01  \n 3rd Qu.: 84.12  \n Max.   :123.20  \n```\n\n\n:::\n:::\n\n\n\n\n## Summarizing one column\n\n-   Mean height:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% summarize(m=mean(Ht))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"m\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"180.104\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\nor to get mean and SD of BMI:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% summarize(m = mean(BMI), s = sd(BMI)) -> d\nd\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"m\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"s\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"22.95589\",\"2\":\"2.863933\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\nThis doesn't work:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(BMI)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'BMI' not found\n```\n\n\n:::\n:::\n\n\n\n\n## Quartiles\n\n-   `quantile` calculates percentiles (\"fractiles\"), so we want the 25th\n    and 75th percentiles:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% summarize( Q1=quantile(Wt, 0.25),\n                        Q3=quantile(Wt, 0.75))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Q1\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Q3\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"66.525\",\"2\":\"84.125\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Creating new columns\n\n-   These weights are in kilograms. Maybe we want to summarize the\n    weights in pounds.\n-   Convert kg to lb by multiplying by 2.2.\n-   Create new column and summarize that:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% mutate(wt_lb=Wt*2.2) %>%\n  summarize(Q1_lb=quantile(wt_lb, 0.25),\n            Q3_lb=quantile(wt_lb, 0.75)) \n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Q1_lb\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Q3_lb\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"146.355\",\"2\":\"185.075\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Counting how many\n\nfor example, number of athletes in each sport:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% count(Sport)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Sport\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"n\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"BBall\",\"2\":\"25\"},{\"1\":\"Field\",\"2\":\"19\"},{\"1\":\"Gym\",\"2\":\"4\"},{\"1\":\"Netball\",\"2\":\"23\"},{\"1\":\"Row\",\"2\":\"37\"},{\"1\":\"Swim\",\"2\":\"22\"},{\"1\":\"T400m\",\"2\":\"29\"},{\"1\":\"TSprnt\",\"2\":\"15\"},{\"1\":\"Tennis\",\"2\":\"11\"},{\"1\":\"WPolo\",\"2\":\"17\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Counting how many, variation 2:\n\nAnother way (which will make sense in a moment):\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% group_by(Sport) %>%\n  summarize(count=n())\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Sport\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"count\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"BBall\",\"2\":\"25\"},{\"1\":\"Field\",\"2\":\"19\"},{\"1\":\"Gym\",\"2\":\"4\"},{\"1\":\"Netball\",\"2\":\"23\"},{\"1\":\"Row\",\"2\":\"37\"},{\"1\":\"Swim\",\"2\":\"22\"},{\"1\":\"T400m\",\"2\":\"29\"},{\"1\":\"TSprnt\",\"2\":\"15\"},{\"1\":\"Tennis\",\"2\":\"11\"},{\"1\":\"WPolo\",\"2\":\"17\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Summaries by group\n\n-   Might want separate summaries for each \"group\", eg. mean and SD of\n    height for males and females. Strategy is `group_by` (to define the\n    groups) and then `summarize`:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% group_by(Sex) %>% \n  summarize(mean_Ht = mean(Ht), sd_Ht = sd(Ht))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Sex\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"mean_Ht\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"sd_Ht\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"female\",\"2\":\"174.5940\",\"3\":\"8.242203\"},{\"1\":\"male\",\"2\":\"185.5059\",\"3\":\"7.903487\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Count plus stats\n\n-   If you want number of observations per group plus some stats, you\n    need to go the `n()` way:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% group_by(Sex) %>%\nsummarize(n = n(), mean_Ht = mean(Ht), sd_Ht = sd(Ht))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Sex\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"n\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"mean_Ht\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"sd_Ht\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"female\",\"2\":\"100\",\"3\":\"174.5940\",\"4\":\"8.242203\"},{\"1\":\"male\",\"2\":\"102\",\"3\":\"185.5059\",\"4\":\"7.903487\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n-   This explains second variation on counting within group: \"within\n    each sport/Sex, how many athletes were there?\"\n\n## Summarizing several columns\n\n-   Standard deviation of each (numeric) column:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% summarize(across(where(is.numeric), \\(x) sd(x))) \n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"RCC\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WCC\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hc\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hg\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Ferr\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"BMI\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"SSF\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"%Bfat\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"LBM\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Ht\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Wt\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"0.4579764\",\"2\":\"1.800549\",\"3\":\"3.662989\",\"4\":\"1.362451\",\"5\":\"47.50124\",\"6\":\"2.863933\",\"7\":\"32.56533\",\"8\":\"6.189826\",\"9\":\"13.0702\",\"10\":\"9.734494\",\"11\":\"13.92557\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n-   Median and IQR of all columns whose name starts with H:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% summarize(across(starts_with(\"H\"),\n                       list(med = \\(x) median(x), \n                            iqr = \\(x) IQR(x))))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Hc_med\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hc_iqr\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hg_med\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hg_iqr\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Ht_med\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Ht_iqr\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"43.5\",\"2\":\"4.975\",\"3\":\"14.7\",\"4\":\"2.075\",\"5\":\"179.7\",\"6\":\"12.175\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n## Same thing by group\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% \n  group_by(Sex) %>% \n  summarize(across(starts_with(\"H\"), \n                   list(med = \\(h) median(h), \n                        iqr = \\(h) IQR(h))))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Sex\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Hc_med\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hc_iqr\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hg_med\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hg_iqr\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Ht_med\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Ht_iqr\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"female\",\"2\":\"40.6\",\"3\":\"4.025\",\"4\":\"13.5\",\"5\":\"1.600\",\"6\":\"175.00\",\"7\":\"8.675\"},{\"1\":\"male\",\"2\":\"45.5\",\"3\":\"2.575\",\"4\":\"15.5\",\"5\":\"0.975\",\"6\":\"185.55\",\"7\":\"11.250\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nathletes %>% \n  group_by(Sex) %>% \n  summarize(across(ends_with(\"C\"), \n                   list(med = \\(h) median(h), \n                        iqr = \\(h) IQR(h))))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Sex\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"RCC_med\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RCC_iqr\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WCC_med\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"WCC_iqr\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hc_med\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Hc_iqr\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"female\",\"2\":\"4.385\",\"3\":\"0.370\",\"4\":\"6.7\",\"5\":\"2.15\",\"6\":\"40.6\",\"7\":\"4.025\"},{\"1\":\"male\",\"2\":\"5.015\",\"3\":\"0.315\",\"4\":\"7.1\",\"5\":\"2.35\",\"6\":\"45.5\",\"7\":\"2.575\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"numsum_files/libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"numsum_files/libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}